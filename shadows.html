<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Belevision — ظلال</title>
<style>
:root{--bg-dark:#000000;--text:#ffffff;--accent:#FFD36F;--header-height:80px}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg-dark);color:var(--text);font-family:'IBM Plex Sans',sans-serif;}
.site-header{position:fixed;left:0;top:0;width:100%;height:var(--header-height);display:flex;align-items:center;justify-content:center;z-index:1000;background:var(--bg-dark)}
.site-logo{font-weight:700;color:var(--accent);font-size:1.5rem;text-decoration:none}
body{padding-top:var(--header-height);} 
#canvas-bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}
.main-wrap{position:relative;z-index:2;min-height:calc(100vh - var(--header-height));}
.gallery{display:block;overflow-y:auto;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;height:calc(100vh - var(--header-height));scroll-behavior:smooth}
.slide{height:100vh;display:grid;grid-template-rows:auto 1fr;gap:16px;padding:60px 40px 40px;scroll-snap-align:start;position:relative;align-items:start}
.caption{background:rgba(0,0,0,0.45);padding:20px;border-radius:8px;text-align:right}
.caption h3{font-size:2rem;color:var(--accent);margin-bottom:12px}
.caption p{font-size:1.1rem;color:#ddd;line-height:1.5}
.images{display:block;position:relative;height:100%;margin-top:8px}
/* Collage tiles (free-form) */
.collage{position:relative;width:100%;height:100%;overflow:visible}
.tile{position:absolute;will-change:transform,opacity;cursor:pointer;border-radius:12px;overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,0.55);transition:transform 420ms cubic-bezier(.2,.9,.3,1),opacity 420ms ease}
.tile img{display:block;width:100%;height:100%;object-fit:cover}
.slide.in-view .tile{opacity:1;transform:translateY(0) scale(1)}
.tile.small{width:140px;height:180px}
.tile.medium{width:220px;height:260px}
.tile.large{width:360px;height:260px}
.tile.xlarge{width:420px;height:320px}
.tile:hover{transform:translateY(-8px) scale(1.02);z-index:30}

@media (max-width:900px){
  .tile.large,.tile.xlarge{width:260px;height:180px}
}
.footer{position:fixed;right:18px;bottom:18px;z-index:60;color:rgba(255,255,255,0.6)}
/* big preview */
.big-preview{position:fixed;inset:0;z-index:220;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.86);backdrop-filter:blur(6px);opacity:0;transform:scale(0.98);transition:opacity 280ms cubic-bezier(.2,.9,.3,1),transform 280ms cubic-bezier(.2,.9,.3,1);pointer-events:none}
.big-preview.is-open{opacity:1;transform:scale(1);pointer-events:auto}
.big-preview__inner{max-width:86vw;max-height:86vh;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:12px;box-shadow:0 30px 120px rgba(0,0,0,0.6);flex-direction:column}
.big-preview__inner img{max-width:100%;max-height:100%;object-fit:contain}
.big-preview__close{position:fixed;top:18px;right:18px;background:rgba(255,255,255,0.06);border:none;color:#fff;padding:8px 12px;border-radius:8px;font-size:18px;cursor:pointer}
.big-preview__caption{margin-top:12px;color:rgba(255,255,255,0.95);font-size:1rem;text-align:center;max-width:86vw;padding:6px 12px}
/* Swiper basic overrides */
.thumbs-swiper{display:flex;justify-content:center;gap:10px;padding:18px 8px;max-width:100%;box-sizing:border-box}
.thumbs-swiper .swiper-slide{width:80px;height:56px;opacity:0.7;border-radius:6px;overflow:hidden}
.thumbs-swiper .swiper-slide-thumb-active{opacity:1;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
.thumbs-swiper img{width:100%;height:100%;object-fit:cover;display:block}
.main-swiper{position:relative}
.main-swiper .swiper-slide{display:block}
</style>
</style>
</head>
<body>
  <header class="site-header" role="banner"><div class="site-logo">Belevision</div></header>
  <canvas id="canvas-bg" aria-hidden="true"></canvas>
  <div class="main-wrap">
    <main id="mainRoot">
        <!-- Swiper gallery: main + thumbs -->
        <div class="gallery swiper-container">
          <div class="swiper main-swiper">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div class="caption"><h3>البورتريه الجديد</h3><p>حوّل صورك العادية إلى بورتريهات مذهلة بسهولة.</p></div>
                <div class="images">
                  <img src="https://picsum.photos/id/1015/1400/1000" alt="بورتريه 1" data-caption="بورتريه 1" tabindex="0">
                  <img src="https://picsum.photos/id/1016/1400/1000" alt="بورتريه 2" data-caption="بورتريه 2" tabindex="0">
                  <img src="https://picsum.photos/id/1022/1400/1000" alt="بورتريه 3" data-caption="بورتريه 3" tabindex="0">
                  <img src="https://picsum.photos/id/1023/1400/1000" alt="بورتريه 4" data-caption="بورتريه 4" tabindex="0">
                </div>
              </div>

              <div class="swiper-slide">
                <div class="caption"><h3>أنماط فوتوغرافية</h3><p>اختر من أنماط ألوان متعددة لتخصيص صورك حسب ذوقك.</p></div>
                <div class="images">
                  <img src="https://picsum.photos/id/1017/1400/1000" alt="أنماط 1" data-caption="أنماط 1" tabindex="0">
                  <img src="https://picsum.photos/id/1018/1400/1000" alt="أنماط 2" data-caption="أنماط 2" tabindex="0">
                  <img src="https://picsum.photos/id/1019/1400/1000" alt="أنماط 3" data-caption="أنماط 3" tabindex="0">
                  <img src="https://picsum.photos/id/1024/1400/1000" alt="أنماط 4" data-caption="أنماط 4" tabindex="0">
                </div>
              </div>

              <div class="swiper-slide">
                <div class="caption"><h3>التصوير الليلي</h3><p>التقط تفاصيل أكثر في ظروف الإضاءة المنخفضة باستخدام أوضاع الليل.</p></div>
                <div class="images">
                  <img src="https://picsum.photos/id/1020/1400/1000" alt="ليل 1" data-caption="ليل 1" tabindex="0">
                  <img src="https://picsum.photos/id/1021/1400/1000" alt="ليل 2" data-caption="ليل 2" tabindex="0">
                  <img src="https://picsum.photos/id/1014/1400/1000" alt="ليل 3" data-caption="ليل 3" tabindex="0">
                  <img src="https://picsum.photos/id/1013/1400/1000" alt="ليل 4" data-caption="ليل 4" tabindex="0">
                </div>
              </div>

              <div class="swiper-slide">
                <div class="caption"><h3>فيديوهات احترافية</h3><p>سجّل فيديوهات بدقة عالية مع ثبات مذهل باستخدام أوضاع الفيديو المتقدمة.</p></div>
                <div class="images">
                  <img src="https://picsum.photos/id/1022/1400/1000" alt="فيديو 1" data-caption="فيديو 1" tabindex="0">
                  <img src="https://picsum.photos/id/1023/1400/1000" alt="فيديو 2" data-caption="فيديو 2" tabindex="0">
                  <img src="https://picsum.photos/id/1024/1400/1000" alt="فيديو 3" data-caption="فيديو 3" tabindex="0">
                  <img src="https://picsum.photos/id/1025/1400/1000" alt="فيديو 4" data-caption="فيديو 4" tabindex="0">
                </div>
              </div>
            </div>
            <!-- navigation -->
            <div class="swiper-button-next" aria-hidden="true"></div>
            <div class="swiper-button-prev" aria-hidden="true"></div>
          </div>

          <!-- thumbs -->
          <div class="thumbs-swiper swiper">
            <div class="swiper-wrapper">
              <div class="swiper-slide" role="button" aria-label="عرض البورتريه 1"><img src="https://picsum.photos/id/1015/300/200" alt="thumb 1"></div>
              <div class="swiper-slide" role="button" aria-label="عرض البورتريه 2"><img src="https://picsum.photos/id/1017/300/200" alt="thumb 2"></div>
              <div class="swiper-slide" role="button" aria-label="عرض البورتريه 3"><img src="https://picsum.photos/id/1020/300/200" alt="thumb 3"></div>
              <div class="swiper-slide" role="button" aria-label="عرض البورتريه 4"><img src="https://picsum.photos/id/1022/300/200" alt="thumb 4"></div>
            </div>
          </div>
        </div>
    </main>
  </div>

  <!-- Fullscreen preview overlay -->
  <div id="bigPreview" aria-hidden="true" class="big-preview" role="dialog" aria-modal="true">
    <button class="big-preview__close" aria-label="Close preview">✕</button>
    <div class="big-preview__inner" role="document"></div>
  </div>

  <div class="footer">Belevision © 2025</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<!-- Swiper.js -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<script>
// --- Three.js animated background (slightly simplified) ---
(function(){
  const canvas = document.getElementById('canvas-bg');
  if(!canvas) return;
  const scene = new THREE.Scene();
  scene.fog = new THREE.FogExp2(0x000000, 0.00015);
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 10000);
  camera.position.z = 0;
  const renderer = new THREE.WebGLRenderer({canvas, alpha:true, antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio || 1);
  const pointSprite = new THREE.TextureLoader().load('https://threejs.org/examples/textures/sprites/disc.png');
  function createStars(count, zRange){
    const geometry = new THREE.BufferGeometry();
    const positions = [];
    const sizes = [];
    const speeds = [];
    const phases = [];
    for(let i=0;i<count;i++){
      positions.push((Math.random()-0.5)*4000,(Math.random()-0.5)*4000,-Math.random()*zRange);
      sizes.push(Math.random()*2.6+1.4);
      speeds.push(Math.random()*0.12+0.05);
      phases.push(Math.random()*Math.PI*2);
    }
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions,3));
    geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes,1));
    geometry.setAttribute('speed', new THREE.Float32BufferAttribute(speeds,1));
    geometry.setAttribute('phase', new THREE.Float32BufferAttribute(phases,1));
    const material = new THREE.ShaderMaterial({
      uniforms:{time:{value:0}, pointTexture:{value:pointSprite}},
      vertexShader:`attribute float size; attribute float phase; varying float vDepth; varying float vPhase; void main(){ vec4 mvPosition=modelViewMatrix*vec4(position,1.0); vDepth=-mvPosition.z; vPhase=phase; gl_PointSize=size*(220.0/vDepth); gl_Position=projectionMatrix*mvPosition; }`,
      fragmentShader:`uniform sampler2D pointTexture; uniform float time; varying float vDepth; varying float vPhase; void main(){ vec4 texColor=texture2D(pointTexture,gl_PointCoord); float intensity=1.06/(0.05+vDepth*0.00062); intensity *= 0.78 + 0.28*sin(time*2.0+vPhase); intensity *= smoothstep(0.0, 800.0, vDepth); gl_FragColor=vec4(vec3(intensity), texColor.a); }`,
      transparent:true, blending:THREE.AdditiveBlending, depthTest:false
    });
    const stars = new THREE.Points(geometry, material);
    scene.add(stars);
    return stars;
  }
  const nearStars = createStars(1200, 1000);
  const midStars = createStars(900, 3000);
  const farStars = createStars(600, 5000);
  const nebulaGeometry = new THREE.PlaneGeometry(7000,7000,32,32);
  const nebulaMaterial = new THREE.ShaderMaterial({
    uniforms:{time:{value:0}},
    vertexShader:`varying vec2 vUv; void main(){ vUv=uv; gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0); }`,
    fragmentShader:`varying vec2 vUv; uniform float time; void main(){ float n=sin(vUv.x*6.0 + time*0.04)*cos(vUv.y*6.0 + time*0.06); vec3 color=vec3(0.01,0.01,0.02)+vec3(n*0.04,n*0.02,n*0.04); gl_FragColor=vec4(color,0.45); }`,
    transparent:true, blending:THREE.AdditiveBlending, depthTest:false
  });
  const nebula = new THREE.Mesh(nebulaGeometry, nebulaMaterial); nebula.position.z = -1800; scene.add(nebula);
  let lastTime = 0;
  function animate(time){
    const delta = time - lastTime; lastTime = time;
    requestAnimationFrame(animate);
    nebulaMaterial.uniforms.time.value = time*0.001;
    [nearStars, midStars, farStars].forEach(layer=>{
      const positions = layer.geometry.attributes.position.array;
      const speeds = layer.geometry.attributes.speed.array;
      const count = positions.length/3;
      for(let i=0;i<count;i++){
        let idx = i*3; positions[idx+2] += speeds[i]*1.2; if(positions[idx+2] > 50){ positions[idx] = (Math.random()-0.5)*4000; positions[idx+1] = (Math.random()-0.5)*4000; positions[idx+2] = -5000; }
      }
      layer.geometry.attributes.position.needsUpdate = true; layer.material.uniforms.time.value = time*0.001;
    });
    renderer.render(scene, camera);
  }
  animate();
  window.addEventListener('resize', ()=>{ camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
})();

// --- Gallery interactions ---
document.addEventListener('DOMContentLoaded', ()=>{
  // Use Swiper for slides + thumbs
  let thumbsSwiper = new Swiper('.thumbs-swiper', {
    slidesPerView: 4,
    freeMode: true,
    watchSlidesProgress: true,
    spaceBetween: 12,
    breakpoints: { 900: { slidesPerView: 4 }, 600: { slidesPerView: 3 }, 320: { slidesPerView: 2 } }
  });

  let mainSwiper = new Swiper('.main-swiper', {
    slidesPerView: 1,
    spaceBetween: 20,
    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
    thumbs: { swiper: thumbsSwiper },
    on: {
      slideChange: function(){
        // add in-view like behavior for animation hooks
        document.querySelectorAll('.main-swiper .swiper-slide').forEach((el, idx)=>{
          if(idx === this.activeIndex) el.classList.add('in-view'); else el.classList.remove('in-view');
        });
      }
    }
  });

  // Kick initial in-view state
  document.querySelectorAll('.main-swiper .swiper-slide').forEach((el, idx)=>{ if(idx===0) el.classList.add('in-view'); });

  // lightbox wiring (preserve existing behavior)
  const bigPreview = document.getElementById('bigPreview');
  const bigInner = bigPreview.querySelector('.big-preview__inner');
  const bigClose = bigPreview.querySelector('.big-preview__close');
  function openBig(img){ if(!img) return; bigInner.innerHTML=''; const b = document.createElement('img'); b.src = img.src; b.alt = img.alt || ''; bigInner.appendChild(b); const caption = img.dataset && img.dataset.caption ? img.dataset.caption : (img.alt || ''); if(caption){ const c = document.createElement('div'); c.className='big-preview__caption'; c.textContent = caption; bigInner.appendChild(c); } bigPreview.classList.add('is-open'); bigPreview.setAttribute('aria-hidden','false'); bigPreview._lastCloseAt = 0; if(bigClose && typeof bigClose.focus === 'function'){ try{ bigClose.focus({preventScroll:true}); }catch(e){ try{ bigClose.focus(); }catch(_){} } } }
  function closeBig(){ bigPreview.classList.remove('is-open'); bigPreview.setAttribute('aria-hidden','true'); bigInner.innerHTML=''; bigPreview._lastCloseAt = Date.now(); setTimeout(()=>{ bigPreview._lastCloseAt = 0; }, 600); }
  if(bigClose) bigClose.addEventListener('click', (e)=>{ e.stopPropagation(); closeBig(); });
  bigPreview.addEventListener('pointerdown', (e)=>{ if(!bigInner.contains(e.target)){ bigPreview._lastCloseAt = Date.now(); closeBig(); } });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeBig(); });

  document.querySelectorAll('.gallery .images img').forEach(img=>{
    img.style.cursor = 'pointer';
    img.addEventListener('click', (e)=>{ e.stopPropagation(); const last = bigPreview._lastCloseAt || 0; if(last && (Date.now()-last) < 450) return; openBig(img); });
    img.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); openBig(img); } });
  });

  // Convert images into a free-form collage inside each slide
  function makeCollage(container){
    const imgs = Array.from(container.querySelectorAll('img'));
    const collage = document.createElement('div'); collage.className = 'collage';
    container.innerHTML = ''; container.appendChild(collage);
    const boundsW = container.clientWidth || 1000;
    const boundsH = container.clientHeight || 600;
    imgs.forEach((img, i)=>{
      const tile = document.createElement('div');
      tile.className = 'tile';
      // size random pick
      const sizes = ['small','medium','large','xlarge'];
      tile.classList.add(sizes[Math.floor(Math.random()*sizes.length)]);
      // random pos within bounds
      const pad = 20;
      const left = Math.floor(Math.random()*(boundsW - pad*2)) + pad;
      const top = Math.floor(Math.random()*(boundsH - pad*2)) + pad;
      tile.style.left = left + 'px';
      tile.style.top = top + 'px';
      // slight rotation
      const rot = (Math.random()*20 - 10).toFixed(2);
      tile.style.transform = `translateY(24px) rotate(${rot}deg) scale(0.98)`;
      tile.style.opacity = '0.0';
      // inner image
      const newImg = document.createElement('img'); newImg.src = img.src; newImg.alt = img.alt || '';
      tile.appendChild(newImg);
      collage.appendChild(tile);

      // open big on click
      tile.addEventListener('click', (e)=>{ e.stopPropagation(); const last = bigPreview._lastCloseAt || 0; if(last && (Date.now()-last) < 450) return; openBig(newImg); });
      tile.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openBig(newImg); } });
    });

    // pointer parallax
    collage.addEventListener('pointermove', (e)=>{
      const rect = collage.getBoundingClientRect();
      const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
      const dx = (e.clientX - cx)/rect.width; const dy = (e.clientY - cy)/rect.height;
      Array.from(collage.children).forEach((tile, idx)=>{
        const depth = (idx % 5) * 6; // pseudo-depth
        const tx = dx * depth; const ty = dy * depth;
        tile.style.transform = tile.style.transform.replace(/translateY\([^)]*\)/, `translateY(${8 - depth/4}px)`);
        tile.style.transform += ` translate3d(${tx}px, ${ty}px, 0)`;
      });
    });

    // reveal tiles when parent slide is in-view
    const parentSlide = container.closest('.swiper-slide');
    if(parentSlide && parentSlide.classList.contains('in-view')){
      Array.from(collage.children).forEach((t, idx)=>{ setTimeout(()=>{ t.style.opacity='1'; t.style.transform = t.style.transform.replace(/translateY\([^)]*\)/, 'translateY(0)') }, idx*80); });
    }
  }

  // Initialize collages for each slide images container
  document.querySelectorAll('.main-swiper .images').forEach(imgsContainer=>{
    // try to size container to allow positioning
    imgsContainer.style.minHeight = '420px';
    makeCollage(imgsContainer);
  });
});
</script>
</body>
</html>
